# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Timeweb VPS

## –®–∞–≥ 1: –ê—Ä–µ–Ω–¥–∞ VPS –Ω–∞ Timeweb

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://timeweb.com/ru/services/vps
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   - **CPU**: 2 —è–¥—Ä–∞ (–º–∏–Ω–∏–º—É–º 1)
   - **RAM**: 2 GB (–º–∏–Ω–∏–º—É–º)
   - **SSD**: 20 GB (–º–∏–Ω–∏–º—É–º)
   - **OS**: Ubuntu 22.04 LTS
3. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑ (~300-500‚ÇΩ/–º–µ—Å)
4. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—É—á–∏—Ç–µ:
   - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
   - Root –ø–∞—Ä–æ–ª—å (–ø—Ä–∏–¥–µ—Ç –Ω–∞ email)

## –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ß–µ—Ä–µ–∑ SSH (Mac/Linux):

```bash
ssh root@–≤–∞—à-ip-–∞–¥—Ä–µ—Å
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ email
```

### –ß–µ—Ä–µ–∑ PuTTY (Windows):

1. –°–∫–∞—á–∞–π—Ç–µ PuTTY: https://www.putty.org/
2. Host Name: IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS
3. Port: 22
4. Connection type: SSH
5. –ù–∞–∂–º–∏—Ç–µ Open
6. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω: `root`
7. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ email

## –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /root
git clone https://github.com/–≤–∞—à-username/vk-automation-platform.git
cd vk-automation-platform
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ SCP (–µ—Å–ª–∏ –Ω–µ—Ç GitHub)

```bash
# –ù–∞ –≤–∞—à–µ–º Mac (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –ù–ï –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
cd /Users/nikolajorehov/Downloads
scp -r vkauto root@–≤–∞—à-ip:/root/vk-automation
```

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /root/vk-automation-platform  # –∏–ª–∏ /root/vkauto
cp .env.production .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# –ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –ë–î
POSTGRES_PASSWORD=–≤–∞—à_—Å–ª–æ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–¥–ª—è_–±–∞–∑—ã_–¥–∞–Ω–Ω—ã—Ö

# VK API —Ç–æ–∫–µ–Ω (–∏–∑ VK Ads)
VK_ACCESS_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_vk
VK_AD_ACCOUNT_ID=–≤–∞—à_id_–∫–∞–±–∏–Ω–µ—Ç–∞

# JWT —Å–µ–∫—Ä–µ—Ç (–ª—é–±–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ 32+ —Å–∏–º–≤–æ–ª–æ–≤)
JWT_SECRET=—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞_–¥–ª—è_–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

# –í–∞—à IP –∏–ª–∏ –¥–æ–º–µ–Ω
NEXT_PUBLIC_API_URL=http://–≤–∞—à-ip-–∞–¥—Ä–µ—Å

# Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_NOTIFICATIONS_ENABLED=true
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å:** `Ctrl + X`, –∑–∞—Ç–µ–º `Y`, –∑–∞—Ç–µ–º `Enter`

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

```bash
chmod +x deploy.sh
sudo ./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Docker –∏ Docker Compose
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL, Redis, API –∏ Web
- ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker-compose -f docker-compose.prod.yml ps
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã (State: Up):
- postgres
- redis
- api
- web
- nginx

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

```bash
# API –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs -f api

# Web –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs -f web

# –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤: Ctrl + C
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://–≤–∞—à-ip-–∞–¥—Ä–µ—Å
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å VK Automation Platform!

## –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 7.1. –ö—É–ø–∏—Ç—å –¥–æ–º–µ–Ω

–ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω –Ω–∞:
- REG.RU
- Timeweb (–º–æ–∂–Ω–æ —Ç–∞–º –∂–µ –≥–¥–µ VPS)
- –õ—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### 7.2. –ü—Ä–∏–≤—è–∑–∞—Ç—å –¥–æ–º–µ–Ω –∫ IP

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º –¥–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å:

```
–¢–∏–ø: A
–ò–º—è: @ (–∏–ª–∏ –ø—É—Å—Ç–æ–µ)
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à-IP-–∞–¥—Ä–µ—Å
TTL: 3600
```

–î–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–∞ www:
```
–¢–∏–ø: A
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à-IP-–∞–¥—Ä–µ—Å
TTL: 3600
```

### 7.3. –û–±–Ω–æ–≤–∏—Ç—å .env

```bash
nano .env
```

–ò–∑–º–µ–Ω–∏—Ç–µ:
```env
NEXT_PUBLIC_API_URL=http://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
docker-compose -f docker-compose.prod.yml restart
```

## –®–∞–≥ 8: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (HTTPS)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot:

```bash
apt-get install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.ru -d www.–≤–∞—à-–¥–æ–º–µ–Ω.ru

# –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron)
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 3 * * * certbot renew --quiet
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.prod.yml ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs -f api
docker-compose -f docker-compose.prod.yml logs -f web

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.prod.yml restart

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose -f docker-compose.prod.yml down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.prod.yml up -d

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.prod.yml up -d --build
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞:

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Git
git pull
docker-compose -f docker-compose.prod.yml up -d --build
```

### –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
docker exec vk-automation-postgres pg_dump -U postgres vk_automation > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
docker exec -i vk-automation-postgres psql -U postgres vk_automation < backup_20240101.sql
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
free -h
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall:

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã
ufw allow 22    # SSH
ufw allow 80    # HTTP
ufw allow 443   # HTTPS
ufw enable
ufw status
```

### –ò–∑–º–µ–Ω–∏—Ç—å SSH –ø–æ—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
nano /etc/ssh/sshd_config
# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É: Port 22 ‚Üí Port 2222
systemctl restart sshd

# –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–æ–≤—ã–π –ø–æ—Ä—Ç –≤ firewall
ufw allow 2222
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs –∏–º—è-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose -f docker-compose.prod.yml config
```

### –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏:

```bash
# –î–æ–±–∞–≤–∏—Ç—å swap
fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
echo '/swapfile none swap sw 0 0' >> /etc/fstab
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ postgres
docker-compose -f docker-compose.prod.yml restart postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs postgres
```

## –°—Ç–æ–∏–º–æ—Å—Ç—å

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Timeweb:**
- VPS 2GB RAM, 2 CPU, 20GB SSD: ~400‚ÇΩ/–º–µ—Å
- –î–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ~200‚ÇΩ/–≥–æ–¥

**–ò—Ç–æ–≥–æ:** ~400‚ÇΩ/–º–µ—Å—è—Ü –¥–ª—è —Ä–∞–±–æ—Ç—ã 24/7

## –ì–æ—Ç–æ–≤–æ! üéâ

–í–∞—à VK Automation Platform —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é!

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:**
- –õ–æ–≥–∏: `docker-compose -f docker-compose.prod.yml logs -f`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: README.md
- GitHub Issues
